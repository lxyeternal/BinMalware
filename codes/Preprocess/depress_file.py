# !/usr/bin/env python
# -*-coding:utf-8 -*-

"""
# @File     : filter_files.py
# @Project  : Binsimi
# Time      : 2023/11/1 22:58
# Author    : honywen
# version   : python 3.8
# Description：
"""


import os
import py7zr


def decompress_7z(file_path, output_path, password):
    # 解压 7z 文件
    with py7zr.SevenZipFile(file_path, mode='r', password=password) as z:
        z.extractall(path=output_path)
    # 删除原 7z 文件
    os.remove(file_path)


def decompress_main():
    basedir = "../../dataset/families"
    password = "infected"
    families = os.listdir(basedir)
    for family in families:
        zipfiles = os.listdir(os.path.join(basedir, family))
        for zipfile in zipfiles:
            decompress_7z(os.path.join(basedir, family, zipfile), os.path.join(basedir, family), password)


decompress_main()


